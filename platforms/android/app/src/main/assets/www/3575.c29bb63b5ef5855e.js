"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3575],{3575:(w,m,l)=>{l.r(m),l.d(m,{AdmindashPageModule:()=>y});var _=l(6895),p=l(4006),r=l(603),f=l(3169),h=l(5861),g=l(9260),e=l(4650),x=l(6188),O=l(3385),C=l(8690);function P(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"ion-row",20)(10,"ion-col")(11,"a")(12,"h6",21),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.postdetails(a))}),e._uU(13,"Read More"),e.qZA()()(),e.TgZ(14,"ion-col",22)(15,"ion-icon",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.deleteBlog(a.key))}),e.qZA()()()()()}if(2&i){const t=c.$implicit;e.xp6(3),e.Oqu(t.title),e.xp6(2),e.Oqu(t.tag),e.xp6(2),e.Oqu(e.lcZ(8,3,t.date))}}function b(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2).$implicit,a=e.oxw();return e.KtG(a.updateBlog(o))}),e._uU(1,"Update"),e.qZA()}}function M(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.toggleReadOnly())}),e._uU(1,"Click to Edit"),e.qZA()}}function A(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"ion-content",25)(1,"div",26)(2,"ion-header")(3,"ion-toolbar")(4,"ion-buttons",4)(5,"ion-button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.setOpen(!1))}),e._uU(6,"Close"),e.qZA()(),e.TgZ(7,"ion-buttons",27),e.YNc(8,b,2,0,"ion-button",28),e.YNc(9,M,2,0,"ion-button",28),e.qZA()()(),e.TgZ(10,"div",29)(11,"h2"),e._uU(12,"Edit Post"),e.qZA()(),e.TgZ(13,"div",30)(14,"ion-item")(15,"ion-label",31),e._uU(16,"Title"),e.qZA(),e.TgZ(17,"ion-input",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.title=o)}),e.qZA()(),e.TgZ(18,"ion-item")(19,"ion-label",31),e._uU(20,"Tag"),e.qZA(),e.TgZ(21,"ion-input",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.tag=o)}),e.qZA()(),e.TgZ(22,"ion-item")(23,"ion-label",31),e._uU(24,"Description"),e.qZA(),e.TgZ(25,"ion-textarea",32),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.description=o)}),e.qZA()()()()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw();e.xp6(8),e.Q6J("ngIf",!n.isReadOnly),e.xp6(1),e.Q6J("ngIf",n.isReadOnly),e.xp6(8),e.Q6J("ngModel",t.title)("readonly",n.isReadOnly),e.xp6(4),e.Q6J("ngModel",t.tag)("readonly",n.isReadOnly),e.xp6(4),e.Q6J("ngModel",t.description)("readonly",n.isReadOnly)}}function v(i,c){if(1&i&&(e.TgZ(0,"ion-modal",24),e.YNc(1,A,26,8,"ng-template"),e.qZA()),2&i){const t=e.oxw();e.Q6J("isOpen",t.isModalOpen)}}const Z=[{path:"",component:(()=>{class i{constructor(t,n,o,a,s){this.translateService=t,this.afAuth=n,this.navCtrl=o,this.ionLoaderService=a,this.alertController=s,this.language=this.translateService.currentLang,this.isModalOpen=!1,this.blogs=[],this.blogs1=[],this.view=!1}setOpen(t){this.isModalOpen=t}ngOnInit(){}showLoader(){this.ionLoaderService.simpleLoader()}hideLoader(){this.ionLoaderService.dismissLoader()}customizeLoader(t){this.ionLoaderService.customLoader(t)}OpenToastDanger(t){this.ionLoaderService.openToastDanger(t)}OpenToast(t){this.ionLoaderService.openToast(t)}handleRefresh(t){setTimeout(()=>{t.target.complete()},2e3)}languageChange(){this.translateService.use(this.language)}logoutUser(){var t=this;return new Promise(function(){var n=(0,h.Z)(function*(o,a){(yield t.afAuth.currentUser)&&t.afAuth.signOut().then(()=>{console.log("LOG Out"),t.navCtrl.navigateForward("/admin")}).catch(s=>{a()})});return function(o,a){return n.apply(this,arguments)}}())}addpost(){this.navCtrl.navigateForward("/addpost")}getblog(){this.customizeLoader("Getting Blogs"),this.view=!0,this.blogs=[],this.result=null;const t=[];g.Z.database().ref("posts").on("value",n=>{this.result=n.val(),n.forEach(o=>{const a=o.key,s=o.val();s.key=a,t.push(a),console.log(s)}),console.log(this.result),null==this.result?(this.hideLoader(),this.OpenToastDanger("No Blogs")):(this.hideLoader(),this.OpenToast("Updated Recent Blogs")),this.blogs.length=0;for(let o in this.result){const a=this.result[o],s=t.indexOf(o);this.blogs.push({date:a.date,description:a.description,tag:a.tag,title:a.title,key:t[s]}),console.log("pushed"),this.hideLoader()}})}postdetails(t){this.setOpen(!0),this.selectedPost=t,this.isReadOnly=!0,this.blogs1.push({date:t.date,description:t.description,tag:t.tag,title:t.title,key:t.key})}toggleReadOnly(){this.isReadOnly=!1}updateBlog(t){var n=this;return(0,h.Z)(function*(){const o=g.Z.auth().currentUser;o&&o.email&&o.email.endsWith("@admin.com")?yield(yield n.alertController.create({header:"Confirm update",message:"Are you sure you want to update this post?",buttons:[{text:"Cancel",role:"cancel"},{text:"Update",handler:()=>{g.Z.database().ref(`posts/${t.key}`).update({title:t.title,description:t.description,tag:t.tag}).then(()=>{console.log("Post updated successfully");const u=n.blogs.findIndex(k=>k.key===t.key);-1!==u&&(n.blogs[u]=t),n.setOpen(!1),n.OpenToast("Updated !!")}).catch(u=>{console.error("Error updating post:",u),n.setOpen(!1),n.OpenToastDanger("Failed !!")})}}]})).present():(console.error("User is not authorized to update posts"),n.OpenToastDanger("User is not authorized to update posts"))})()}deleteBlog(t){var n=this;return(0,h.Z)(function*(){const o=g.Z.auth().currentUser;o&&o.email&&o.email.endsWith("@admin.com")?yield(yield n.alertController.create({header:"Confirm delete",message:"Are you sure you want to delete this post?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{g.Z.database().ref(`posts/${t}`).remove().then(()=>{console.log("Post deleted successfully"),n.OpenToastDanger("Deleted !!"),n.blogs=n.blogs.filter(d=>d.key!==t)}).catch(d=>{console.error("Error deleting post:",d)})}}]})).present():console.error("User is not authorized to delete posts")})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.sK),e.Y36(O.zQ),e.Y36(r.SH),e.Y36(C.C),e.Y36(r.Br))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-admindash"]],decls:25,vars:3,consts:[[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","chevron-down-circle-outline","refreshingSpinner","circles"],[1,"ion-no-border"],["slot","end"],["name","log-out-outline","size","large",3,"click"],[1,"card"],[1,"card-content"],[1,"bottom"],[2,"color","black","font-size","21px"],[1,"addpost",3,"click"],["name","add","size","larger",2,"left","13.5%","position","absolute","height","37%","width","50px"],[1,"container"],[1,"m-5","text-center",2,"color","black",3,"click"],[1,"row"],[1,"col-lg-4","col-md-6","col-sm-12"],["class","blog_card",4,"ngFor","ngForOf"],[3,"isOpen",4,"ngFor","ngForOf"],[1,"blog_card"],[1,"blog_card_content"],[1,"ion-justify-content-between"],[3,"click"],[1,"ion-text-end"],["size","large","name","trash-outline","color","danger",3,"click"],[3,"isOpen"],[1,"ion-padding"],[1,"formBody"],["slot","start"],[3,"click",4,"ngIf"],[1,"card-content",2,"text-align","center"],[1,"main"],["position","stacked"],[3,"ngModel","readonly","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-refresher",1),e.NdJ("ionRefresh",function(a){return n.handleRefresh(a)}),e._UZ(2,"ion-refresher-content",2),e.qZA(),e.TgZ(3,"ion-header",3)(4,"ion-toolbar")(5,"ion-buttons",4)(6,"ion-icon",5),e.NdJ("click",function(){return n.logoutUser()}),e.qZA()()()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"h2"),e._uU(11,"Admin Dashboard"),e.qZA()()(),e.TgZ(12,"div")(13,"p",9),e._uU(14,"Add Post"),e.qZA(),e.TgZ(15,"div",10),e.NdJ("click",function(){return n.addpost()}),e._UZ(16,"ion-icon",11),e.qZA()(),e.TgZ(17,"div",12)(18,"h3",13),e.NdJ("click",function(){return n.getblog()}),e._uU(19,"View Recent Blogs"),e.qZA(),e._UZ(20,"hr"),e.TgZ(21,"div",14)(22,"div",15),e.YNc(23,P,16,5,"div",16),e.qZA()()(),e.YNc(24,v,2,1,"ion-modal",17),e.qZA()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(23),e.Q6J("ngForOf",n.blogs),e.xp6(1),e.Q6J("ngForOf",n.blogs1))},dependencies:[_.sg,_.O5,p.JJ,p.On,r.YG,r.Sm,r.wI,r.W2,r.Gu,r.gu,r.pK,r.Ie,r.Q$,r.nJ,r.Wo,r.Nd,r.g2,r.sr,r.ki,r.j9,_.uU],styles:["ion-refresher[_ngcontent-%COMP%]{--background: #fffefe}ion-refresher-content[_ngcontent-%COMP%]{--background: #fffefe}.refresh[_ngcontent-%COMP%]{--background: #fffefe}.card[_ngcontent-%COMP%]{max-width:500px;width:100%;height:250px;position:relative;padding:3rem 2rem;color:#fff;justify-self:center}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:space-between;justify-content:space-between;text-align:center}.card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem;color:#000;margin-top:0%}.card[_ngcontent-%COMP%]   .card-bg[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;overflow:hidden;z-index:-1}.card[_ngcontent-%COMP%]   .card-bg[_ngcontent-%COMP%]   .bg-img[_ngcontent-%COMP%]{height:100%;object-fit:cover;vertical-align:middle;width:100%;filter:blur(3px)}.card[_ngcontent-%COMP%]   .addpost[_ngcontent-%COMP%]{width:100px;height:100px;background-color:gray;align-items:center}.card[_ngcontent-%COMP%]   .blog_card[_ngcontent-%COMP%]{margin:50px 10px;position:relative;display:flex;flex-direction:column;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:none;box-shadow:0 12px 15px rgba(0,0,0,.1),0 17px 50px rgba(0,0,0,.1);border-radius:.375rem;height:195px}.card[_ngcontent-%COMP%]   .blog_card_content[_ngcontent-%COMP%]{padding:16px}.card[_ngcontent-%COMP%]   .blog_card_content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;color:#303133;font-weight:500}.card[_ngcontent-%COMP%]   .blog_card_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:#777}.card[_ngcontent-%COMP%]   .blog_card_content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.card[_ngcontent-%COMP%]   .blog_card_content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:12px;letter-spacing:1.5px;font-weight:500;text-transform:uppercase;color:#c8a482;margin-bottom:33px}.card[_ngcontent-%COMP%]   .blog_card[_ngcontent-%COMP%]:hover   .blog_card_image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translatey(-3%)}"]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.Bz.forChild(Z),f.Bz]}),i})(),y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.ez,p.u5,r.Pc,T]}),i})()}}]);